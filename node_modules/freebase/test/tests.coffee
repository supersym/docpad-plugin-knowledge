#!/usr/bin/env coffee

freebase = require("freebase")
fns = require("./lib/helpers")
_ = require("underscore")

#failing
freebase.inside "toronto", {}, (r) ->
  console.log r.length > 3

freebase.transitive "barrie", "part_of", {}, (r) ->
  console.log r.length > 3


#passing
freebase.lookup "http://toronto.ca", {}, (r) ->
  console.log r.id is "/en/toronto"

freebase.lookup ["/m/09jm8", "http://myspace.com/u2"], {}, (r) ->
  console.log r[1].name is "U2"

freebase.nearby "cn tower",
  type: "/food/restaurant"
, (r) ->
  console.log r.length > 4

freebase.wordnet ["bat", "wood"], {}, (r) ->
  console.log r.length is 2

freebase.wikipedia_external_links "/en/toronto", {}, (r) ->
  console.log r.length >= 3

freebase.wikipedia_links "Toronto", {}, (r) ->
  console.log r.length >= 5

freebase.graph "paul ryan", {}, (r) ->
  console.log r[0].object.name is "Paul Ryan" or r[0].subject.name is "Paul Ryan"

freebase.lookup "australia",
  type: "/film/film"
, (r) ->
  console.log r.mid is "/m/026qnh6"

freebase.same_as_links "http://www.geonames.org/6167865/", {}, (r) ->
  console.log r.links.length > 3

freebase.image "australia",
  type: "/location/location"
, (r) ->
  console.log r.match(/maxheight/)?

freebase.grammar "toronto maple leafs", {}, (r) ->
  console.log _.isEqual(r,
    plural: true
    gender: null
    article: "a"
    pronoun: "they"
    copula: "are"
  )

freebase.grammar "ron weasley", {}, (r) ->
  console.log _.isEqual(r,
    plural: false
    gender: "male"
    article: "a"
    pronoun: "he"
    copula: "is"
  )

freebase.wordnet "wood", {}, (r) ->
  console.log r.length is 4

freebase.geolocation "toronto", {}, (r) ->
  console.log r.latitude?

freebase.place_data
  lat: 43.64806
  lng: -79.40417
, {}, (r) ->
  console.log r.city.name is "Toronto"

freebase.place_data
  lat: 52.05375719395869
  lng: 5.9511566162109375
, {}, (r) ->
  console.log r.country.name is "Netherlands"

freebase.place_data
  lat: 47.9991410647952
  lng: 14.172706604003906
, {}, (r) ->
  console.log r.country.name is "Austria"

freebase.gallery "hurricanes", {}, (r) ->
  console.log r.length > 20

freebase.lookup ["toronto", "suddenly susan"], {}, (r) ->
  console.log r.length is 2

freebase.translate ["toronto", "suddenly susan"], {}, (r) ->
  console.log r[0] is "Toronto"

freebase.sentence ["toronto", "suddenly susan"], {}, (r) ->
  console.log r.length is 2

freebase.sentence [
  name: "toronto"
,
  id: "/en/radiohead"
  name: "suddenly susan"
], {}, (r) ->
  console.log r.length is 2

query = [
  id: "/en/toronto"
  name: null
,
  id: "/en/radsdfiohead"
  name: null
,
  id: "/en/thom_yorke"
  name: null
,
  id: "/en/tony_hawk"
  name: null
]
freebase.mqlread query, {}, (r) ->
  console.log r.length is 4

freebase.lookup "thom yorke", {}, (r) ->
  console.log r.mid is "/m/01p0w_"

freebase.lookup "tom green", {}, (r) ->
  console.log r.mid is "/m/017yxq"

freebase.same_as_links "toronto", {}, (r) ->
  console.log r.links.length > 3

freebase.same_as_links "/m/0h7h6", {}, (r) ->
  console.log r.links.length > 3

query =
  type: "/music/album"
  id: "/en/keep_it_turned_on"
  artist: null

freebase.mqlread query, {}, (r) ->
  console.log r.result.artist is "Rick Astley"

freebase.outgoing "ubuntu", {}, (r) ->
  console.log r.length > 15

query = [
  type: "/base/disaster2/tornado"
  name: null
]
freebase.paginate query,
  max: 20
, (r) ->
  console.log r.length > 20

query = [
  type: "/base/disaster2/tornado"
  name: null
]

freebase.continue query, 'max': 20, (r) ->
    console.log r.length > 20

freebase.list "earthquakes", {}, (r) ->
  console.log r.length > 20

freebase.description "mike myers", {}, (r) ->
  console.log r.match(/myers/i)?

freebase.description "http://myspace.com/u2", {}, (r) ->
  console.log r.match(/u2/i)?

freebase.sentence "thom yorke", {}, (r) ->
  console.log r.match(/radiohead/i)?

freebase.translate "toronto",
  lang: "zh"
, (r) ->
  console.log r.match(/多伦多/i)?

freebase.translate "radiohead",
  lang: "/lang/ko"
, (r) ->
  console.log r.match(/라디오헤드/i)?

freebase.incoming "germany", {}, (r) ->
  console.log r.length > 20

freebase.search "franklin", {}, (r) ->
  console.log r.length > 2

freebase.notable "canada", {}, (r) ->
  console.log r.id is "/location/country"

freebase.wikipedia_page "tony hawk", {}, (r) ->
  console.log r is "Tony_Hawk"

freebase.sentence "meatloaf",
  type: "/food/food"
, (r) ->
  console.log r?

